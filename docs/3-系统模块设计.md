# 系统模块设计



## 总体设计

游戏分为前端渲染和后端控制两大模块，两者通过标准的数据接口连接。前后端分离将有助于协同开发、分模块调试以及模块单独升级优化。

游戏过程中每一帧都会进行如下操作：

前端按键捕获 -> 后端数据处理 -> 前端渲染 -> 前端打印输出



约定：

- 函数命名均为

```C
type verb_noun(int, char, struct others*, struct setting*)
```

- 变量命名
  - 均使用单数



## 前端

### 获取输入

```C
int get_key()
```



### 渲染

`渲染`是将后端处理好的数据以形象化的方式输出到二维字符数组中，为其后`打印输出到屏幕`服务。

#### 渲染跳板

```C
void render_board(char* map, struct board* board_HEAD, struct setting* setting)
```



#### 渲染玩家

```C
int render_player(char* map, struct player* player, struct setting* setting)
```



### 打印

`打印` 是将渲染完成的字符数组打印输出到屏幕上。

```C
void print_map(char* map, struct setting* setting)
```



## 后端

### 数据修改

#### 跳板

##### 随机生成跳板*

```C
void gen_board(int line_id, struct settings* settings)
```



##### 添加跳板

```C
void add_board(int line_id, int x, char type)
```



##### 删除整行的跳板*

```C
void rm_board(int line_id)
```



#### 玩家

##### 左右移动

```C
void move_player_key(int key, struct player* player)
```



##### 反弹 & 自然下落

```C
void move_player_natural(struct player* player)
```



### 状态判断

##### 成功着陆（到跳板上）

```C
int land_on_board(struct board* board_HEAD, struct player* player)
```



##### 坠入虚空

```C
int drop_into_void(struct player* player, struct setting* setting)
```











